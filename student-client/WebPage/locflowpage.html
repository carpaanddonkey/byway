<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>顺道儿——订单状态</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="css\general_style.css" rel="stylesheet" type="text/css" />
        <link href="css\locflow_style.css" rel="stylesheet" type="text/css" />
        <script src = "js/jquery-1.8.2.min.js"></script>
        <script src="js/menu.js"></script>
        <script type = "text/javascript"> 
            var txt = '';
            var r = window.location.search;
            r = r.replace('?','');
            function getData(div_id){
            var url =  'http://api.byway.net.cn/v1/order_record/'+r+'/';
            $.ajax({
                    async:false,
                    type:"get",
                    url:url,
                    xhrFields:{withCredentials:true},
                    success:function(str){
                        var obj = JSON.parse(str);
                        txt+=
                        '<div class="title">物流详情</div>'+
                        '<div class="chunks">'+
                            '<div class="chunk">'+
                            '<span class="state">订单提交成功</span>'+
                            '<span class="dsp">订单号：'+obj.order_id+'</span>'+
                            '<span class="time">'+obj.payment_time+'</span></div>';
                        if(obj.status>=3)
                        {
                            txt+='<div class="chunk">'+
                                    '<span class="p">|</span>'+
                                    '<span class="state">订单被接受</span>'
                                    '<span class="dsp">订单号：'+obj.order_id+'</span>'+
                                    '<span class="time">'+obj.receive_time+'</span></div>';

                            if(obj.status>=5){
                                txt+='<div class="chunk">'+
                                    '<span class="p">|</span>'+
                                    '<span class="state">订单开始配送</span>'
                                    '<span class="dsp">订单号：'+obj.order_id+'</span>'+
                                    '<span class="time">'+obj.obj.send_time+'</span></div>';
                                if(obj.status==7){
                                    txt+='<div class="chunk">'+
                                        '<span class="p">|</span>'+
                                        '<span class="state">订单已送达</span>'
                                        '<span class="dsp">订单号：'+obj.order_id+'</span>'+
                                        '<span class="time">'+obj.finish_time+'</span></div>';
                                }
                            }

                        }
                        document.getElementById(div_id).innerHTML = txt;
                        
                    },
                    error:function(jsonResult){
                        alert("error");
                    }
                });
        }
        </script> 
    </head>
    <body onload = "getData('main_body')">   
    <div class="header">
            <a onclick = "javascript:window.history.back()"><img class="back" src="Images/icon/arrow.png" alt="返回"/></a>
            <span class="theme" >&nbsp;&nbsp;订单状态</span>
    </div>
    <div class="clearfix_head"></div>
    <div class="main_body" id = "main_body">
        
    </div>
    </body>
</html>


